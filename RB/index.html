<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>recipes</title>
		<style>
			html, body, div, span, applet, object, iframe,
			h1, h2, h3, h4, h5, h6, p, blockquote, pre,
			a, abbr, acronym, address, big, cite, code,
			del, dfn, em, img, ins, kbd, q, s, samp,
			small, strike, strong, sub, sup, tt, var,
			b, u, i, center,
			dl, dt, dd, ol, ul, li,
			fieldset, form, label, legend,
			table, caption, tbody, tfoot, thead, tr, th, td,
			article, aside, canvas, details, embed, 
			figure, figcaption, footer, header, hgroup, 
			menu, nav, output, ruby, section, summary,
			time, mark, audio, video {
				margin: 0;
				padding: 0;
				border: 0;
				font-size: 100%;
				font: inherit;
				vertical-align: baseline;
			}
			/* HTML5 display-role reset for older browsers */
			article, aside, details, figcaption, figure, 
			footer, header, hgroup, menu, nav, section {
				display: block;
			}
			body {
				line-height: 1;
			}
			ol, ul {
				list-style: none;
			}
			blockquote, q {
				quotes: none;
			}
			blockquote:before, blockquote:after,
			q:before, q:after {
				content: '';
				content: none;
			}
			table {
				border-collapse: collapse;
				border-spacing: 0;
			}
		</style>
		<style>
			canvas {
				position: absolute;
				width: 550px;
				height: 400px;
				left: 0;
				top: 0;
				outline: none;
			}

			.progress-wrapper {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				position: absolute;
				width: 550px;
				height: 400px;
				left: 0;
				top: 0;
				background-color: white;
				z-index: 50;
				pointer-events: none;
				row-gap: 8px;
			}

			.progress-bar {
				width: 170px;
				height: 8px;
				box-sizing: border-box;
				border: 1px solid #0f3395;
				border-radius: 8px;
			}

			.progress {
				height: 100%;
				width: 100%;
				background-color: #95b0e8;
				scale: 0 1;
				transform-origin: 0;
			}

			.hidden {
				display: none !important;
			}
		</style>
		<link id="-gd-engine-icon" rel="icon" type="image/png" href="index.icon.png" />
<link rel="apple-touch-icon" href="index.apple-touch-icon.png"/>

	</head>

	<body>
		<canvas id="canvas" width="550" height="400"></canvas>
		<div class="progress-wrapper" id="progress-wrapper">
			<img src="/kafra.gif">
			<div class="progress-bar">
				<div id="progress" class="progress"></div>
			</div>
		</div>

		<script src="index.js"></script>
		<script>
			const EXPECTED_BYTES = 22573484;
			const progress_bar = document.getElementById("progress");
			const onProgress = function(current, total) {
				const progress = current/22573484;
				progress_bar.style["scale"] = `${progress} 1`;
			};
			const wasm_url = "https://sambuters.github.io/SH/RB/index";
			const pkg_url = "https://dl.dropbox.com/scl/fi/bwdmcfakzblybudylx5b2/index.pck?rlkey=il0igivtb3gx6frurmpmdz3hf&st=n4phgpij";
			var engine = new Engine({...{"args":[],"canvasResizePolicy":0,"emscriptenPoolSize":8,"ensureCrossOriginIsolationHeaders":false,"executable":"index","experimentalVK":false,"fileSizes":{"index.pck":3015904,"index.wasm":19557580},"focusCanvas":true,"gdextensionLibs":[],"godotPoolSize":4}, onProgress});

			Promise.all([
				engine.init(wasm_url),
				engine.preloadFile(pkg_url)
			]).then(() => {
				return engine.startGame({
					mainPack: pkg_url
				}).then(() => {
					document.getElementById("progress-wrapper").classList.add("hidden");
				});
			});
		</script>
	</body>
</html>
